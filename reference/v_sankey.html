<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create a Sankey Chart — v_sankey • vchartr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Poppins-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create a Sankey Chart — v_sankey"><meta name="description" content="Create a Sankey Chart"><meta property="og:description" content="Create a Sankey Chart"><!-- dependencies from examples --><script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="libs/vchart-binding-0.1.3/vchart.js"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">vchartr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/vchartr.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/bar.html">bar</a></li>
    <li><a class="dropdown-item" href="../articles/charts.html">charts</a></li>
    <li><a class="dropdown-item" href="../articles/line.html">line</a></li>
    <li><a class="dropdown-item" href="../articles/pie.html">pie</a></li>
    <li><a class="dropdown-item" href="../articles/scatter.html">scatter</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Create a Sankey Chart</h1>

      <div class="d-none name"><code>v_sankey.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Create a Sankey Chart</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">v_sankey</span><span class="op">(</span></span>
<span>  <span class="va">vc</span>,</span>
<span>  mapping <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  serie_id <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  data_id <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-vc">vc<a class="anchor" aria-label="anchor" href="#arg-vc"></a></dt>
<dd><p>A chart initialized with <code><a href="vchart.html">vchart()</a></code>.</p></dd>


<dt id="arg-mapping">mapping<a class="anchor" aria-label="anchor" href="#arg-mapping"></a></dt>
<dd><p>Default list of aesthetic mappings to use for chart.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>Default dataset to use for chart. If not already
a <code>data.frame</code>, it will be coerced to with <code>as.data.frame</code>.</p></dd>


<dt id="arg-name">name<a class="anchor" aria-label="anchor" href="#arg-name"></a></dt>
<dd><p>Name for the serie, only used for single serie (no <code>color</code>/<code>fill</code> aesthetic supplied).</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional parameters for the serie.</p></dd>


<dt id="arg-data-id-serie-id">data_id, serie_id<a class="anchor" aria-label="anchor" href="#arg-data-id-serie-id"></a></dt>
<dd><p>ID for the data/serie, can be used to further customize the chart with <code><a href="v_specs.html">v_specs()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code><a href="vchart.html">vchart()</a></code> <code>htmlwidget</code> object.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dreamrs.github.io/vchartr/">vchartr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Basic Sankey Chart</span></span></span>
<span class="r-in"><span><span class="fu"><a href="vchart.html">vchart</a></span><span class="op">(</span><span class="va">energy_sankey</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">v_sankey</span><span class="op">(</span><span class="fu"><a href="aes.html">aes</a></span><span class="op">(</span><span class="va">target</span>, <span class="va">source</span>, value <span class="op">=</span> <span class="va">value</span><span class="op">)</span><span class="op">)</span></span></span>
<div id="htmlwidget-3814dc3fa30049588d43" style="width:700px;height:432.632880098888px;" class="vchart html-widget"></div>
<script type="application/json" data-for="htmlwidget-3814dc3fa30049588d43">{"x":{"specs":{"type":"sankey","label":{"visible":true,"style":{"fontSize":10}},"data":[{"name":"NULL","id":"data_0ce44034","values":[{"nodes":[{"nodes":"Agricultural 'waste'","nodes_id":0},{"nodes":"Agriculture","nodes_id":1},{"nodes":"Bio-conversion","nodes_id":2},{"nodes":"Biofuel imports","nodes_id":3},{"nodes":"Biomass imports","nodes_id":4},{"nodes":"Coal","nodes_id":5},{"nodes":"Coal imports","nodes_id":6},{"nodes":"Coal reserves","nodes_id":7},{"nodes":"District heating","nodes_id":8},{"nodes":"Domestic aviation","nodes_id":9},{"nodes":"Electricity grid","nodes_id":10},{"nodes":"Gas","nodes_id":11},{"nodes":"Gas imports","nodes_id":12},{"nodes":"Gas reserves","nodes_id":13},{"nodes":"Geothermal","nodes_id":14},{"nodes":"H2","nodes_id":15},{"nodes":"H2 conversion","nodes_id":16},{"nodes":"Heating and cooling - commercial","nodes_id":17},{"nodes":"Heating and cooling - homes","nodes_id":18},{"nodes":"Hydro","nodes_id":19},{"nodes":"Industry","nodes_id":20},{"nodes":"International aviation","nodes_id":21},{"nodes":"International shipping","nodes_id":22},{"nodes":"Lighting & appliances - commercial","nodes_id":23},{"nodes":"Lighting & appliances - homes","nodes_id":24},{"nodes":"Liquid","nodes_id":25},{"nodes":"Losses","nodes_id":26},{"nodes":"Marine algae","nodes_id":27},{"nodes":"National navigation","nodes_id":28},{"nodes":"Ngas","nodes_id":29},{"nodes":"Nuclear","nodes_id":30},{"nodes":"Oil","nodes_id":31},{"nodes":"Oil imports","nodes_id":32},{"nodes":"Oil reserves","nodes_id":33},{"nodes":"Other waste","nodes_id":34},{"nodes":"Over generation / exports","nodes_id":35},{"nodes":"Pumped heat","nodes_id":36},{"nodes":"Rail transport","nodes_id":37},{"nodes":"Road transport","nodes_id":38},{"nodes":"Solar","nodes_id":39},{"nodes":"Solar PV","nodes_id":40},{"nodes":"Solar Thermal","nodes_id":41},{"nodes":"Solid","nodes_id":42},{"nodes":"Thermal generation","nodes_id":43},{"nodes":"Tidal","nodes_id":44},{"nodes":"UK land based bioenergy","nodes_id":45},{"nodes":"Wave","nodes_id":46},{"nodes":"Wind","nodes_id":47}],"links":[{"target":2,"source":0,"value":124.729},{"target":2,"source":27,"value":4.375},{"target":2,"source":34,"value":77.81},{"target":2,"source":45,"value":182.01},{"target":25,"source":2,"value":0.597},{"target":25,"source":3,"value":35},{"target":25,"source":31,"value":611.99},{"target":26,"source":2,"value":26.862},{"target":26,"source":11,"value":1.401},{"target":26,"source":10,"value":56.691},{"target":26,"source":16,"value":6.242},{"target":26,"source":43,"value":787.129},{"target":42,"source":2,"value":280.322},{"target":42,"source":4,"value":35},{"target":42,"source":5,"value":75.571},{"target":42,"source":34,"value":56.587},{"target":11,"source":2,"value":81.14400000000001},{"target":11,"source":29,"value":122.952},{"target":5,"source":6,"value":11.606},{"target":5,"source":7,"value":63.965},{"target":8,"source":43,"value":79.32899999999999},{"target":20,"source":25,"value":121.066},{"target":20,"source":42,"value":46.477},{"target":20,"source":11,"value":48.58},{"target":20,"source":8,"value":10.639},{"target":20,"source":10,"value":342.165},{"target":17,"source":11,"value":0.129},{"target":17,"source":8,"value":22.505},{"target":17,"source":10,"value":40.858},{"target":17,"source":36,"value":70.672},{"target":18,"source":8,"value":46.184},{"target":18,"source":10,"value":113.726},{"target":18,"source":36,"value":193.026},{"target":18,"source":41,"value":19.263},{"target":10,"source":43,"value":525.5309999999999},{"target":10,"source":14,"value":7.013},{"target":10,"source":19,"value":6.995},{"target":10,"source":40,"value":59.901},{"target":10,"source":44,"value":9.452},{"target":10,"source":46,"value":19.013},{"target":10,"source":47,"value":289.366},{"target":35,"source":10,"value":104.453},{"target":16,"source":10,"value":27.14},{"target":38,"source":25,"value":135.835},{"target":38,"source":10,"value":37.797},{"target":38,"source":15,"value":20.897},{"target":1,"source":25,"value":3.64},{"target":1,"source":42,"value":0.882},{"target":1,"source":11,"value":2.096},{"target":1,"source":10,"value":4.412},{"target":37,"source":25,"value":4.413},{"target":37,"source":10,"value":7.863},{"target":23,"source":10,"value":90.008},{"target":24,"source":10,"value":93.494},{"target":29,"source":12,"value":40.719},{"target":29,"source":13,"value":82.233},{"target":43,"source":42,"value":400.12},{"target":43,"source":11,"value":151.891},{"target":43,"source":30,"value":839.978},{"target":15,"source":16,"value":20.897},{"target":22,"source":25,"value":128.69},{"target":9,"source":25,"value":14.458},{"target":21,"source":25,"value":206.267},{"target":28,"source":25,"value":33.218},{"target":31,"source":32,"value":504.287},{"target":31,"source":33,"value":107.703},{"target":40,"source":39,"value":59.901},{"target":41,"source":39,"value":19.263}]}]}],"categoryField":"nodes","valueField":"value","sourceField":"source","targetField":"target"},"data":[{"source":"Agricultural 'waste'","target":"Bio-conversion","value":124.729},{"source":"Marine algae","target":"Bio-conversion","value":4.375},{"source":"Other waste","target":"Bio-conversion","value":77.81},{"source":"UK land based bioenergy","target":"Bio-conversion","value":182.01},{"source":"Bio-conversion","target":"Liquid","value":0.597},{"source":"Biofuel imports","target":"Liquid","value":35},{"source":"Oil","target":"Liquid","value":611.99},{"source":"Bio-conversion","target":"Losses","value":26.862},{"source":"Gas","target":"Losses","value":1.401},{"source":"Electricity grid","target":"Losses","value":56.691},{"source":"H2 conversion","target":"Losses","value":6.242},{"source":"Thermal generation","target":"Losses","value":787.129},{"source":"Bio-conversion","target":"Solid","value":280.322},{"source":"Biomass imports","target":"Solid","value":35},{"source":"Coal","target":"Solid","value":75.571},{"source":"Other waste","target":"Solid","value":56.587},{"source":"Bio-conversion","target":"Gas","value":81.14400000000001},{"source":"Ngas","target":"Gas","value":122.952},{"source":"Coal imports","target":"Coal","value":11.606},{"source":"Coal reserves","target":"Coal","value":63.965},{"source":"Thermal generation","target":"District heating","value":79.32899999999999},{"source":"Liquid","target":"Industry","value":121.066},{"source":"Solid","target":"Industry","value":46.477},{"source":"Gas","target":"Industry","value":48.58},{"source":"District heating","target":"Industry","value":10.639},{"source":"Electricity grid","target":"Industry","value":342.165},{"source":"Gas","target":"Heating and cooling - commercial","value":0.129},{"source":"District heating","target":"Heating and cooling - commercial","value":22.505},{"source":"Electricity grid","target":"Heating and cooling - commercial","value":40.858},{"source":"Pumped heat","target":"Heating and cooling - commercial","value":70.672},{"source":"District heating","target":"Heating and cooling - homes","value":46.184},{"source":"Electricity grid","target":"Heating and cooling - homes","value":113.726},{"source":"Pumped heat","target":"Heating and cooling - homes","value":193.026},{"source":"Solar Thermal","target":"Heating and cooling - homes","value":19.263},{"source":"Thermal generation","target":"Electricity grid","value":525.5309999999999},{"source":"Geothermal","target":"Electricity grid","value":7.013},{"source":"Hydro","target":"Electricity grid","value":6.995},{"source":"Solar PV","target":"Electricity grid","value":59.901},{"source":"Tidal","target":"Electricity grid","value":9.452},{"source":"Wave","target":"Electricity grid","value":19.013},{"source":"Wind","target":"Electricity grid","value":289.366},{"source":"Electricity grid","target":"Over generation / exports","value":104.453},{"source":"Electricity grid","target":"H2 conversion","value":27.14},{"source":"Liquid","target":"Road transport","value":135.835},{"source":"Electricity grid","target":"Road transport","value":37.797},{"source":"H2","target":"Road transport","value":20.897},{"source":"Liquid","target":"Agriculture","value":3.64},{"source":"Solid","target":"Agriculture","value":0.882},{"source":"Gas","target":"Agriculture","value":2.096},{"source":"Electricity grid","target":"Agriculture","value":4.412},{"source":"Liquid","target":"Rail transport","value":4.413},{"source":"Electricity grid","target":"Rail transport","value":7.863},{"source":"Electricity grid","target":"Lighting & appliances - commercial","value":90.008},{"source":"Electricity grid","target":"Lighting & appliances - homes","value":93.494},{"source":"Gas imports","target":"Ngas","value":40.719},{"source":"Gas reserves","target":"Ngas","value":82.233},{"source":"Solid","target":"Thermal generation","value":400.12},{"source":"Gas","target":"Thermal generation","value":151.891},{"source":"Nuclear","target":"Thermal generation","value":839.978},{"source":"H2 conversion","target":"H2","value":20.897},{"source":"Liquid","target":"International shipping","value":128.69},{"source":"Liquid","target":"Domestic aviation","value":14.458},{"source":"Liquid","target":"International aviation","value":206.267},{"source":"Liquid","target":"National navigation","value":33.218},{"source":"Oil imports","target":"Oil","value":504.287},{"source":"Oil reserves","target":"Oil","value":107.703},{"source":"Solar","target":"Solar PV","value":59.901},{"source":"Solar","target":"Solar Thermal","value":19.263}],"mapping":null,"type":"sankey"},"evals":[],"jsHooks":[]}</script><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Some options</span></span></span>
<span class="r-in"><span><span class="fu"><a href="vchart.html">vchart</a></span><span class="op">(</span><span class="va">energy_sankey</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">v_sankey</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="aes.html">aes</a></span><span class="op">(</span><span class="va">target</span>, <span class="va">source</span>, value <span class="op">=</span> <span class="va">value</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    nodeAlign <span class="op">=</span> <span class="st">"left"</span>,</span></span>
<span class="r-in"><span>    nodeGap <span class="op">=</span> <span class="fl">8</span>,</span></span>
<span class="r-in"><span>    nodeWidth <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>    minNodeHeight <span class="op">=</span> <span class="fl">4</span>,</span></span>
<span class="r-in"><span>    link <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      state <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>        hover <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>          fillOpacity <span class="op">=</span> <span class="fl">1</span></span></span>
<span class="r-in"><span>        <span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<div id="htmlwidget-d9080448559f478a0f97" style="width:700px;height:432.632880098888px;" class="vchart html-widget"></div>
<script type="application/json" data-for="htmlwidget-d9080448559f478a0f97">{"x":{"specs":{"type":"sankey","label":{"visible":true,"style":{"fontSize":10}},"nodeAlign":"left","nodeGap":8,"nodeWidth":10,"minNodeHeight":4,"link":{"state":{"hover":{"fillOpacity":1}}},"data":[{"name":"NULL","id":"data_d6f04e70","values":[{"nodes":[{"nodes":"Agricultural 'waste'","nodes_id":0},{"nodes":"Agriculture","nodes_id":1},{"nodes":"Bio-conversion","nodes_id":2},{"nodes":"Biofuel imports","nodes_id":3},{"nodes":"Biomass imports","nodes_id":4},{"nodes":"Coal","nodes_id":5},{"nodes":"Coal imports","nodes_id":6},{"nodes":"Coal reserves","nodes_id":7},{"nodes":"District heating","nodes_id":8},{"nodes":"Domestic aviation","nodes_id":9},{"nodes":"Electricity grid","nodes_id":10},{"nodes":"Gas","nodes_id":11},{"nodes":"Gas imports","nodes_id":12},{"nodes":"Gas reserves","nodes_id":13},{"nodes":"Geothermal","nodes_id":14},{"nodes":"H2","nodes_id":15},{"nodes":"H2 conversion","nodes_id":16},{"nodes":"Heating and cooling - commercial","nodes_id":17},{"nodes":"Heating and cooling - homes","nodes_id":18},{"nodes":"Hydro","nodes_id":19},{"nodes":"Industry","nodes_id":20},{"nodes":"International aviation","nodes_id":21},{"nodes":"International shipping","nodes_id":22},{"nodes":"Lighting & appliances - commercial","nodes_id":23},{"nodes":"Lighting & appliances - homes","nodes_id":24},{"nodes":"Liquid","nodes_id":25},{"nodes":"Losses","nodes_id":26},{"nodes":"Marine algae","nodes_id":27},{"nodes":"National navigation","nodes_id":28},{"nodes":"Ngas","nodes_id":29},{"nodes":"Nuclear","nodes_id":30},{"nodes":"Oil","nodes_id":31},{"nodes":"Oil imports","nodes_id":32},{"nodes":"Oil reserves","nodes_id":33},{"nodes":"Other waste","nodes_id":34},{"nodes":"Over generation / exports","nodes_id":35},{"nodes":"Pumped heat","nodes_id":36},{"nodes":"Rail transport","nodes_id":37},{"nodes":"Road transport","nodes_id":38},{"nodes":"Solar","nodes_id":39},{"nodes":"Solar PV","nodes_id":40},{"nodes":"Solar Thermal","nodes_id":41},{"nodes":"Solid","nodes_id":42},{"nodes":"Thermal generation","nodes_id":43},{"nodes":"Tidal","nodes_id":44},{"nodes":"UK land based bioenergy","nodes_id":45},{"nodes":"Wave","nodes_id":46},{"nodes":"Wind","nodes_id":47}],"links":[{"target":2,"source":0,"value":124.729},{"target":2,"source":27,"value":4.375},{"target":2,"source":34,"value":77.81},{"target":2,"source":45,"value":182.01},{"target":25,"source":2,"value":0.597},{"target":25,"source":3,"value":35},{"target":25,"source":31,"value":611.99},{"target":26,"source":2,"value":26.862},{"target":26,"source":11,"value":1.401},{"target":26,"source":10,"value":56.691},{"target":26,"source":16,"value":6.242},{"target":26,"source":43,"value":787.129},{"target":42,"source":2,"value":280.322},{"target":42,"source":4,"value":35},{"target":42,"source":5,"value":75.571},{"target":42,"source":34,"value":56.587},{"target":11,"source":2,"value":81.14400000000001},{"target":11,"source":29,"value":122.952},{"target":5,"source":6,"value":11.606},{"target":5,"source":7,"value":63.965},{"target":8,"source":43,"value":79.32899999999999},{"target":20,"source":25,"value":121.066},{"target":20,"source":42,"value":46.477},{"target":20,"source":11,"value":48.58},{"target":20,"source":8,"value":10.639},{"target":20,"source":10,"value":342.165},{"target":17,"source":11,"value":0.129},{"target":17,"source":8,"value":22.505},{"target":17,"source":10,"value":40.858},{"target":17,"source":36,"value":70.672},{"target":18,"source":8,"value":46.184},{"target":18,"source":10,"value":113.726},{"target":18,"source":36,"value":193.026},{"target":18,"source":41,"value":19.263},{"target":10,"source":43,"value":525.5309999999999},{"target":10,"source":14,"value":7.013},{"target":10,"source":19,"value":6.995},{"target":10,"source":40,"value":59.901},{"target":10,"source":44,"value":9.452},{"target":10,"source":46,"value":19.013},{"target":10,"source":47,"value":289.366},{"target":35,"source":10,"value":104.453},{"target":16,"source":10,"value":27.14},{"target":38,"source":25,"value":135.835},{"target":38,"source":10,"value":37.797},{"target":38,"source":15,"value":20.897},{"target":1,"source":25,"value":3.64},{"target":1,"source":42,"value":0.882},{"target":1,"source":11,"value":2.096},{"target":1,"source":10,"value":4.412},{"target":37,"source":25,"value":4.413},{"target":37,"source":10,"value":7.863},{"target":23,"source":10,"value":90.008},{"target":24,"source":10,"value":93.494},{"target":29,"source":12,"value":40.719},{"target":29,"source":13,"value":82.233},{"target":43,"source":42,"value":400.12},{"target":43,"source":11,"value":151.891},{"target":43,"source":30,"value":839.978},{"target":15,"source":16,"value":20.897},{"target":22,"source":25,"value":128.69},{"target":9,"source":25,"value":14.458},{"target":21,"source":25,"value":206.267},{"target":28,"source":25,"value":33.218},{"target":31,"source":32,"value":504.287},{"target":31,"source":33,"value":107.703},{"target":40,"source":39,"value":59.901},{"target":41,"source":39,"value":19.263}]}]}],"categoryField":"nodes","valueField":"value","sourceField":"source","targetField":"target"},"data":[{"source":"Agricultural 'waste'","target":"Bio-conversion","value":124.729},{"source":"Marine algae","target":"Bio-conversion","value":4.375},{"source":"Other waste","target":"Bio-conversion","value":77.81},{"source":"UK land based bioenergy","target":"Bio-conversion","value":182.01},{"source":"Bio-conversion","target":"Liquid","value":0.597},{"source":"Biofuel imports","target":"Liquid","value":35},{"source":"Oil","target":"Liquid","value":611.99},{"source":"Bio-conversion","target":"Losses","value":26.862},{"source":"Gas","target":"Losses","value":1.401},{"source":"Electricity grid","target":"Losses","value":56.691},{"source":"H2 conversion","target":"Losses","value":6.242},{"source":"Thermal generation","target":"Losses","value":787.129},{"source":"Bio-conversion","target":"Solid","value":280.322},{"source":"Biomass imports","target":"Solid","value":35},{"source":"Coal","target":"Solid","value":75.571},{"source":"Other waste","target":"Solid","value":56.587},{"source":"Bio-conversion","target":"Gas","value":81.14400000000001},{"source":"Ngas","target":"Gas","value":122.952},{"source":"Coal imports","target":"Coal","value":11.606},{"source":"Coal reserves","target":"Coal","value":63.965},{"source":"Thermal generation","target":"District heating","value":79.32899999999999},{"source":"Liquid","target":"Industry","value":121.066},{"source":"Solid","target":"Industry","value":46.477},{"source":"Gas","target":"Industry","value":48.58},{"source":"District heating","target":"Industry","value":10.639},{"source":"Electricity grid","target":"Industry","value":342.165},{"source":"Gas","target":"Heating and cooling - commercial","value":0.129},{"source":"District heating","target":"Heating and cooling - commercial","value":22.505},{"source":"Electricity grid","target":"Heating and cooling - commercial","value":40.858},{"source":"Pumped heat","target":"Heating and cooling - commercial","value":70.672},{"source":"District heating","target":"Heating and cooling - homes","value":46.184},{"source":"Electricity grid","target":"Heating and cooling - homes","value":113.726},{"source":"Pumped heat","target":"Heating and cooling - homes","value":193.026},{"source":"Solar Thermal","target":"Heating and cooling - homes","value":19.263},{"source":"Thermal generation","target":"Electricity grid","value":525.5309999999999},{"source":"Geothermal","target":"Electricity grid","value":7.013},{"source":"Hydro","target":"Electricity grid","value":6.995},{"source":"Solar PV","target":"Electricity grid","value":59.901},{"source":"Tidal","target":"Electricity grid","value":9.452},{"source":"Wave","target":"Electricity grid","value":19.013},{"source":"Wind","target":"Electricity grid","value":289.366},{"source":"Electricity grid","target":"Over generation / exports","value":104.453},{"source":"Electricity grid","target":"H2 conversion","value":27.14},{"source":"Liquid","target":"Road transport","value":135.835},{"source":"Electricity grid","target":"Road transport","value":37.797},{"source":"H2","target":"Road transport","value":20.897},{"source":"Liquid","target":"Agriculture","value":3.64},{"source":"Solid","target":"Agriculture","value":0.882},{"source":"Gas","target":"Agriculture","value":2.096},{"source":"Electricity grid","target":"Agriculture","value":4.412},{"source":"Liquid","target":"Rail transport","value":4.413},{"source":"Electricity grid","target":"Rail transport","value":7.863},{"source":"Electricity grid","target":"Lighting & appliances - commercial","value":90.008},{"source":"Electricity grid","target":"Lighting & appliances - homes","value":93.494},{"source":"Gas imports","target":"Ngas","value":40.719},{"source":"Gas reserves","target":"Ngas","value":82.233},{"source":"Solid","target":"Thermal generation","value":400.12},{"source":"Gas","target":"Thermal generation","value":151.891},{"source":"Nuclear","target":"Thermal generation","value":839.978},{"source":"H2 conversion","target":"H2","value":20.897},{"source":"Liquid","target":"International shipping","value":128.69},{"source":"Liquid","target":"Domestic aviation","value":14.458},{"source":"Liquid","target":"International aviation","value":206.267},{"source":"Liquid","target":"National navigation","value":33.218},{"source":"Oil imports","target":"Oil","value":504.287},{"source":"Oil reserves","target":"Oil","value":107.703},{"source":"Solar","target":"Solar PV","value":59.901},{"source":"Solar","target":"Solar Thermal","value":19.263}],"mapping":null,"type":"sankey"},"evals":[],"jsHooks":[]}</script><span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># With data as tree structure</span></span></span>
<span class="r-in"><span><span class="va">titanic</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">Titanic</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="vchart.html">vchart</a></span><span class="op">(</span><span class="va">titanic</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">v_sankey</span><span class="op">(</span><span class="fu"><a href="aes.html">aes</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    lvl1 <span class="op">=</span> <span class="va">Class</span>,</span></span>
<span class="r-in"><span>    lvl2 <span class="op">=</span> <span class="va">Sex</span>,</span></span>
<span class="r-in"><span>    lvl3 <span class="op">=</span> <span class="va">Age</span>,</span></span>
<span class="r-in"><span>    lvl4 <span class="op">=</span> <span class="va">Survived</span>,</span></span>
<span class="r-in"><span>    value <span class="op">=</span> <span class="va">Freq</span></span></span>
<span class="r-in"><span>  <span class="op">)</span><span class="op">)</span></span></span>
<div id="htmlwidget-f580f777b1e05c08cd38" style="width:700px;height:432.632880098888px;" class="vchart html-widget"></div>
<script type="application/json" data-for="htmlwidget-f580f777b1e05c08cd38">{"x":{"specs":{"type":"sankey","label":{"visible":true,"style":{"fontSize":10}},"data":[{"name":null,"id":"data_a74bee52","values":[{"nodes":[{"name":"1st","value":325,"children":[{"name":"Male","value":180,"children":[{"name":"Child","value":5,"children":[{"name":"No","value":0},{"name":"Yes","value":5}]},{"name":"Adult","value":175,"children":[{"name":"No","value":118},{"name":"Yes","value":57}]}]},{"name":"Female","value":145,"children":[{"name":"Child","value":1,"children":[{"name":"No","value":0},{"name":"Yes","value":1}]},{"name":"Adult","value":144,"children":[{"name":"No","value":4},{"name":"Yes","value":140}]}]}]},{"name":"2nd","value":285,"children":[{"name":"Male","value":179,"children":[{"name":"Child","value":11,"children":[{"name":"No","value":0},{"name":"Yes","value":11}]},{"name":"Adult","value":168,"children":[{"name":"No","value":154},{"name":"Yes","value":14}]}]},{"name":"Female","value":106,"children":[{"name":"Child","value":13,"children":[{"name":"No","value":0},{"name":"Yes","value":13}]},{"name":"Adult","value":93,"children":[{"name":"No","value":13},{"name":"Yes","value":80}]}]}]},{"name":"3rd","value":706,"children":[{"name":"Male","value":510,"children":[{"name":"Child","value":48,"children":[{"name":"No","value":35},{"name":"Yes","value":13}]},{"name":"Adult","value":462,"children":[{"name":"No","value":387},{"name":"Yes","value":75}]}]},{"name":"Female","value":196,"children":[{"name":"Child","value":31,"children":[{"name":"No","value":17},{"name":"Yes","value":14}]},{"name":"Adult","value":165,"children":[{"name":"No","value":89},{"name":"Yes","value":76}]}]}]},{"name":"Crew","value":885,"children":[{"name":"Male","value":862,"children":[{"name":"Child","value":0,"children":[{"name":"No","value":0},{"name":"Yes","value":0}]},{"name":"Adult","value":862,"children":[{"name":"No","value":670},{"name":"Yes","value":192}]}]},{"name":"Female","value":23,"children":[{"name":"Child","value":0,"children":[{"name":"No","value":0},{"name":"Yes","value":0}]},{"name":"Adult","value":23,"children":[{"name":"No","value":3},{"name":"Yes","value":20}]}]}]}]}]}],"categoryField":"name","valueField":"value","nodeKey":"datum => datum.name"},"data":[{"Class":"1st","Sex":"Male","Age":"Child","Survived":"No","Freq":0},{"Class":"2nd","Sex":"Male","Age":"Child","Survived":"No","Freq":0},{"Class":"3rd","Sex":"Male","Age":"Child","Survived":"No","Freq":35},{"Class":"Crew","Sex":"Male","Age":"Child","Survived":"No","Freq":0},{"Class":"1st","Sex":"Female","Age":"Child","Survived":"No","Freq":0},{"Class":"2nd","Sex":"Female","Age":"Child","Survived":"No","Freq":0},{"Class":"3rd","Sex":"Female","Age":"Child","Survived":"No","Freq":17},{"Class":"Crew","Sex":"Female","Age":"Child","Survived":"No","Freq":0},{"Class":"1st","Sex":"Male","Age":"Adult","Survived":"No","Freq":118},{"Class":"2nd","Sex":"Male","Age":"Adult","Survived":"No","Freq":154},{"Class":"3rd","Sex":"Male","Age":"Adult","Survived":"No","Freq":387},{"Class":"Crew","Sex":"Male","Age":"Adult","Survived":"No","Freq":670},{"Class":"1st","Sex":"Female","Age":"Adult","Survived":"No","Freq":4},{"Class":"2nd","Sex":"Female","Age":"Adult","Survived":"No","Freq":13},{"Class":"3rd","Sex":"Female","Age":"Adult","Survived":"No","Freq":89},{"Class":"Crew","Sex":"Female","Age":"Adult","Survived":"No","Freq":3},{"Class":"1st","Sex":"Male","Age":"Child","Survived":"Yes","Freq":5},{"Class":"2nd","Sex":"Male","Age":"Child","Survived":"Yes","Freq":11},{"Class":"3rd","Sex":"Male","Age":"Child","Survived":"Yes","Freq":13},{"Class":"Crew","Sex":"Male","Age":"Child","Survived":"Yes","Freq":0},{"Class":"1st","Sex":"Female","Age":"Child","Survived":"Yes","Freq":1},{"Class":"2nd","Sex":"Female","Age":"Child","Survived":"Yes","Freq":13},{"Class":"3rd","Sex":"Female","Age":"Child","Survived":"Yes","Freq":14},{"Class":"Crew","Sex":"Female","Age":"Child","Survived":"Yes","Freq":0},{"Class":"1st","Sex":"Male","Age":"Adult","Survived":"Yes","Freq":57},{"Class":"2nd","Sex":"Male","Age":"Adult","Survived":"Yes","Freq":14},{"Class":"3rd","Sex":"Male","Age":"Adult","Survived":"Yes","Freq":75},{"Class":"Crew","Sex":"Male","Age":"Adult","Survived":"Yes","Freq":192},{"Class":"1st","Sex":"Female","Age":"Adult","Survived":"Yes","Freq":140},{"Class":"2nd","Sex":"Female","Age":"Adult","Survived":"Yes","Freq":80},{"Class":"3rd","Sex":"Female","Age":"Adult","Survived":"Yes","Freq":76},{"Class":"Crew","Sex":"Female","Age":"Adult","Survived":"Yes","Freq":20}],"mapping":null,"type":"sankey"},"evals":["specs.nodeKey"],"jsHooks":[]}</script><span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Only one level</span></span></span>
<span class="r-in"><span><span class="va">titanic_class</span> <span class="op">&lt;-</span> <span class="va">titanic</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html" class="external-link">aggregate</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">.</span>, <span class="va">Freq</span> <span class="op">~</span> <span class="va">Class</span> <span class="op">+</span> <span class="va">Survived</span>, FUN <span class="op">=</span> <span class="va">sum</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="vchart.html">vchart</a></span><span class="op">(</span><span class="va">titanic_class</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">v_sankey</span><span class="op">(</span><span class="fu"><a href="aes.html">aes</a></span><span class="op">(</span><span class="va">Survived</span>, <span class="va">Class</span>, value <span class="op">=</span> <span class="va">Freq</span><span class="op">)</span><span class="op">)</span></span></span>
<div id="htmlwidget-12f972950fd0e3010ce4" style="width:700px;height:432.632880098888px;" class="vchart html-widget"></div>
<script type="application/json" data-for="htmlwidget-12f972950fd0e3010ce4">{"x":{"specs":{"type":"sankey","label":{"visible":true,"style":{"fontSize":10}},"data":[{"name":"NULL","id":"data_c5a78dd2","values":[{"nodes":[{"nodes":"1st","nodes_id":0},{"nodes":"2nd","nodes_id":1},{"nodes":"3rd","nodes_id":2},{"nodes":"Crew","nodes_id":3},{"nodes":"No","nodes_id":4},{"nodes":"Yes","nodes_id":5}],"links":[{"target":4,"source":0,"value":122},{"target":4,"source":1,"value":167},{"target":4,"source":2,"value":528},{"target":4,"source":3,"value":673},{"target":5,"source":0,"value":203},{"target":5,"source":1,"value":118},{"target":5,"source":2,"value":178},{"target":5,"source":3,"value":212}]}]}],"categoryField":"nodes","valueField":"value","sourceField":"source","targetField":"target"},"data":[{"Class":"1st","Survived":"No","Freq":122},{"Class":"2nd","Survived":"No","Freq":167},{"Class":"3rd","Survived":"No","Freq":528},{"Class":"Crew","Survived":"No","Freq":673},{"Class":"1st","Survived":"Yes","Freq":203},{"Class":"2nd","Survived":"Yes","Freq":118},{"Class":"3rd","Survived":"Yes","Freq":178},{"Class":"Crew","Survived":"Yes","Freq":212}],"mapping":null,"type":"sankey"},"evals":[],"jsHooks":[]}</script><span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Victor Perrier, Fanny Meyer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

