---
title: "bar"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{bar}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(vchartr)
```




## Basic Bar Chart

Create a basic bar chart with :

```{r basic}
vbar(
  top_generation,
  aes(country, electricity_generation)
) %>% 
  v_specs(
    label = list(visible = TRUE)
  ) %>% 
  v_colors("#8FBCBB") %>% 
  v_labs(
    title = "Top electricity-generating countries",
    subtitle = "Data for 2023, source: Our World In Data"
  )
```


Highlight a specific bar in the chart :

```{r highlight-bar}
vbar(
  top_generation,
  aes(country, electricity_generation)
) %>% 
  v_specs(
    bar = list(
      style = list(
        fill = JS("datum => datum.x == 'Japan' ? '#5E81AC' : '#88C0D0'")
      )
    )
  )
```


## Grouped Bar Chart

A grouped bar chart with specific colors and custom legend : 

```{r}
vbar(
  subset(world_generation, type == "total"),
  aes(year, generation, fill = source)
) %>% 
  v_colors_manual("Low carbon" = "#8FBCBB", "Fossil fuels" = "#4C566A") %>% 
  v_legend(
    title = list(text = "Source of electricity", visible = TRUE),
    orient = "right",
    position = "start",
    item = list(focus = TRUE)
  )
```


